#!/usr/bin/make -f

export CARGO_HOME=$(CURDIR)/.cargo
export HOME=$(CURDIR)

%:
	dh $@

override_dh_auto_build:
	cargo build --release

override_dh_auto_install:
	install -D -m 755 target/release/rust-spooler debian/rust-spooler/usr/bin/rust-spooler
	install -D -m 644 debian/rust-spooler.service debian/rust-spooler/lib/systemd/system/rust-spooler.service

override_dh_auto_clean:
	cargo clean || true
	rm -rf .cargo

override_dh_auto_test:
	# Skip tests for now